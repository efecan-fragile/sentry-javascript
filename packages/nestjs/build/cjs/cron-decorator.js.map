{"version":3,"file":"cron-decorator.js","sources":["../../src/cron-decorator.ts"],"sourcesContent":["import * as Sentry from '@sentry/node';\nimport type { MonitorConfig } from '@sentry/types';\n\n/**\n * A decorator wrapping the native nest Cron decorator, sending check-ins to Sentry.\n */\nexport const SentryCron = (monitorSlug: string, monitorConfig?: MonitorConfig): MethodDecorator => {\n  return (target: unknown, propertyKey, descriptor: PropertyDescriptor) => {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const originalMethod = descriptor.value as (...args: any[]) => Promise<any>;\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    descriptor.value = function (...args: any[]) {\n      return Sentry.withMonitor(\n        monitorSlug,\n        () => {\n          return originalMethod.apply(this, args);\n        },\n        monitorConfig,\n      );\n    };\n    return descriptor;\n  };\n};\n"],"names":[],"mappings":";;;;AAGA;AACA;AACA;MACa,UAAW,GAAE,CAAC,WAAW,EAAU,aAAa,KAAsC;AACnG,EAAE,OAAO,CAAC,MAAM,EAAW,WAAW,EAAE,UAAU,KAAyB;AAC3E;AACA,IAAI,MAAM,cAAA,GAAiB,UAAU,CAAC,KAAM,EAAA;AAC5C;AACA;AACA,IAAI,UAAU,CAAC,KAAM,GAAE,UAAU,GAAG,IAAI,EAAS;AACjD,MAAM,OAAO,MAAM,CAAC,WAAW;AAC/B,QAAQ,WAAW;AACnB,QAAQ,MAAM;AACd,UAAU,OAAO,cAAc,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA;AACjD,SAAS;AACT,QAAQ,aAAa;AACrB,OAAO,CAAA;AACP,KAAK,CAAA;AACL,IAAI,OAAO,UAAU,CAAA;AACrB,GAAG,CAAA;AACH;;;;"}